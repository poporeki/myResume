!function(e){var c,h,n="0.5.0",v="hasOwnProperty",d=/[\.\/]/,g=/\s*,\s*/,y=function(e,n){return e-n},x={n:{}},b=function(){for(var e=0,n=this.length;e<n;e++)if(void 0!==this[e])return this[e]},z=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},t=Object.prototype.toString,I=String,k=Array.isArray||function(e){return e instanceof Array||"[object Array]"==t.call(e)};eve=function(e,n){var t,r=h,f=Array.prototype.slice.call(arguments,2),i=eve.listeners(e),o=0,l=[],u={},s=[],a=c;s.firstDefined=b,s.lastDefined=z,c=e;for(var p=h=0,v=i.length;p<v;p++)"zIndex"in i[p]&&(l.push(i[p].zIndex),i[p].zIndex<0&&(u[i[p].zIndex]=i[p]));for(l.sort(y);l[o]<0;)if(t=u[l[o++]],s.push(t.apply(n,f)),h)return h=r,s;for(p=0;p<v;p++)if("zIndex"in(t=i[p]))if(t.zIndex==l[o]){if(s.push(t.apply(n,f)),h)break;do{if((t=u[l[++o]])&&s.push(t.apply(n,f)),h)break}while(t)}else u[t.zIndex]=t;else if(s.push(t.apply(n,f)),h)break;return h=r,c=a,s},eve._events=x,eve.listeners=function(e){var n,t,r,f,i,o,l,u,s=k(e)?e:e.split(d),a=x,p=[a],v=[];for(f=0,i=s.length;f<i;f++){for(u=[],o=0,l=p.length;o<l;o++)for(t=[(a=p[o].n)[s[f]],a["*"]],r=2;r--;)(n=t[r])&&(u.push(n),v=v.concat(n.f||[]));p=u}return v},eve.separator=function(e){d=e?(e="["+(e=I(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",new RegExp(e)):/[\.\/]/},eve.on=function(e,o){if("function"!=typeof o)return function(){};for(var n=k(e)?k(e[0])?e:[e]:I(e).split(g),t=0,r=n.length;t<r;t++)!function(e){for(var n,t=k(e)?e:I(e).split(d),r=x,f=0,i=t.length;f<i;f++)r=(r=r.n).hasOwnProperty(t[f])&&r[t[f]]||(r[t[f]]={n:{}});for(r.f=r.f||[],f=0,i=r.f.length;f<i;f++)if(r.f[f]==o){n=!0;break}!n&&r.f.push(o)}(n[t]);return function(e){+e==+e&&(o.zIndex=+e)}},eve.f=function(e){var n=[].slice.call(arguments,1);return function(){eve.apply(null,[e,null].concat(n).concat([].slice.call(arguments,0)))}},eve.stop=function(){h=1},eve.nt=function(e){var n=k(c)?c.join("."):c;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(n):n},eve.nts=function(){return k(c)?c:c.split(d)},eve.off=eve.unbind=function(e,n){if(e){var t=k(e)?k(e[0])?e:[e]:I(e).split(g);if(1<t.length)for(var r=0,f=t.length;r<f;r++)eve.off(t[r],n);else{t=k(e)?e:I(e).split(d);var i,o,l,u,s,a=[x];for(r=0,f=t.length;r<f;r++)for(u=0;u<a.length;u+=l.length-2){if(l=[u,1],i=a[u].n,"*"!=t[r])i[t[r]]&&l.push(i[t[r]]);else for(o in i)i[v](o)&&l.push(i[o]);a.splice.apply(a,l)}for(r=0,f=a.length;r<f;r++)for(i=a[r];i.n;){if(n){if(i.f){for(u=0,s=i.f.length;u<s;u++)if(i.f[u]==n){i.f.splice(u,1);break}!i.f.length&&delete i.f}for(o in i.n)if(i.n[v](o)&&i.n[o].f){var p=i.n[o].f;for(u=0,s=p.length;u<s;u++)if(p[u]==n){p.splice(u,1);break}!p.length&&delete i.n[o].f}}else for(o in delete i.f,i.n)i.n[v](o)&&i.n[o].f&&delete i.n[o].f;i=i.n}}}else eve._events=x={n:{}}},eve.once=function(e,n){var t=function(){return eve.off(e,t),n.apply(this,arguments)};return eve.on(e,t)},eve.version=n,eve.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):e.eve=eve}(this);
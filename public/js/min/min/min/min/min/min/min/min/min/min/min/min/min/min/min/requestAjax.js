function requestAjax(t,e,i){function n(t,e,i){this.options=t,this.el=this.options.el,this.func=e,this.timeout=this.options.timeout,this.requestAnimate=void 0===this.options.requestAnimate||this.options.requestAnimate,this.timeoutFunc=this.options.timeoutFunc,this.aniEle=this.options.aniEle||"loading-ani",this.callback=i,this.xhr()}return n.prototype.ajaxLoadingAnimate={self:this,isClassName:function(t){return!/<[^>]+>/.test(t)},addHtml:function(t){return this.isClassName(t)?"<div class="+t+"></div>":t},getClassName:function(t){if(this.isClassName(t))return t;var e=/class=[\"|'](.*?)[\"|']/g.exec(t);return 0===e.length||null!==e?e[1]:"loading-ani"},start:function(t){if(t.requestAnimate){this.remove(t);var e=this.addHtml(t.aniEle);t.el.append(e)}},remove:function(t){if(t.requestAnimate){var e=this.getClassName(t.aniEle),i=t.el.find("."+e);0!==i.length&&i.remove()}}},n.prototype.xhr=function(){var n=this;n.currentAjax=$.ajax({type:this.options.type||"post",url:this.options.url,timeout:this.options.timeout||6e4,data:this.options.data,async:this.options.async||!0,contentType:this.options.contentType,beforeSend:function(){n.ajaxLoadingAnimate.start(n)},error:n.callback,complete:function(t,e){if("timeout"==e){if(n.currentAjax.abort(),!n.requestAnimate)return;n.ajaxLoadingAnimate.remove(n);var i=n.timeoutFunc;return i?void n.el.empty().append('<a onclick="'+i+'();this.remove();" href="javascript:void(0);" style="text-align:center;">链接超时</a>'):void n.el.empty().append('<a href="##" class="btn-retry" style="text-align:center;">链接超时</a>')}n.ajaxLoadingAnimate.remove(n)},success:n.func})},new n(t,e,i)}
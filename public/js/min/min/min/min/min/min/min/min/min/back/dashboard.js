$(function(){var s=io(),i=[],n=[],h=[],o=0,l=$(".cpu-value"),r=$(".cpu-pb"),d=$(".mem-value"),c=$(".mem-pb"),t=$(".views-switch-block"),u=$(".views-total"),w={},m={labels:n,series:[i,h]},v=new Chartist.Line("#ch1",m,{high:100,low:0,axisY:{onlyInteger:!0},showArea:!0,fullWidth:!0,chartPadding:{bottom:0,left:0}});s.on("hardware",function(t){10<i.length&&(i.shift(),h.shift(),n.shift()),o+=5;var e=t.cpuUsage,a=t.memUsage;l.text(e),d.text(a),r.css("width",e+"%"),c.css("width",a+"%"),i.push(e),h.push(a),n.push(o+"s"),v.update(m),s.emit("my other event",{my:"data"})});var p=new Chartist.Line("#rickshaw2",{labels:[1,2,3,4,5,6,7],series:[]},{high:100,low:0,showArea:!0,showLine:!1,showPoint:!1,fullWidth:!0,axisX:{showLabel:!1,showGrid:!1}});function e(i){requestAjax({url:"/backend/getVistorTotal",data:{kind:i},type:"get",el:$(".widget-2>.card"),aniEle:'<div class="widget-animate"><div class="sk-rotating-plane bg-gray-800"></div></div>'},function(t){for(var e=0,a=t.data,s=0;s<a.length;s++)e+=a[s];w[i]={total:e,chartData:{series:[t]}},u.text(w[i].total),p.update(w[i].chartData)})}e("week"),t.on("click",".btn",function(){var t=$(this);if($(this).addClass("active").siblings().removeClass("active"),t.hasClass("week"))u.text(w.week.total),p.update(w.week.chartData);else if(t.hasClass("month")){if(!w.month)return void e("month");u.text(w.month.total),p.update(w.month.chartData)}}),new ResizeSensor($(".br-mainpanel"),function(){v.update(),v.update()})});